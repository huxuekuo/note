# Redis主从复制与缺点弥补(Redis哨兵模式)



## 	Redis主从配置

​		

1. 首先需要准备两台Redis, 
2. master redis 端口设置为6379 
3. slave redis 端口设置为 6380
4. 更改从redis 的redis.conf在里面添加slaveof 127.0.0.1 6379(这个端口设置为master服务器的端口以及IP地址)
5. 设置完成以后首先需要开启maseter redis
6. 然后开启slave redis



## Redis主从复制原理

​			主从复制主要分全量复制,与增量复制,全量复制主要是在从服务器初始化时向主服务器发送指令,主服务器装快照发送给从服务器,从服务器载入快照,同步完毕以后进行增量复制,当然从服务器可以随时发送全量同步,



## Redis常见问题

### 	如果不在主Redis中设置持久化,会出现什么问题

​		比如A节点是主服务器,B,C从服务器,当A没有打开持久化,B,C在复制的时候A节点宕机但是有重启机制,A节点从起来,但是缓存中的数据空了,B,C发现A节点空了也将自己缓存中的数据删掉了,就算使用了哨兵模式,如果A节点在很短的时间内重启了,哨兵无法检测到,依然会发生刚才的问题,如果必须要关闭持久化就要把重启模式关掉



​			