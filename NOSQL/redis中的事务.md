# redis中的事务

## redis事务基本命令

#### multi

开启事务

#### exec

执行exec命令会使redis事务中的所有命令执行

#### Discard

关闭事务

#### Watch

可以根据watch来实现乐观锁,需要在事务开启之前设置监听一个key如果,开启事务以后监听的这个key发生了改变,这个事务就失败了



## 事务执行流程

在开启一个事务以后的命令保存到事务队列中,如果写入不正确的命令比如命令参数个数不对将会引起整个事务都不会执行,如果在事务执行过程中出现了错误,仍然会执行所有命令,不支持回滚,



## 总结



如果说redis支持事务吧它没有完整的遵循ACID的,就比如原子性,它的命令本身就是原子性的,开启事务以后所有的事务不会立即执行而是存放在队列中,顺序执行,并没有维护原理性的机制,所以说事务并不是原子性,

所以不应该使用redis事务,一般都是存放和读取一些数据,并不涉及逻辑,如果涉及逻辑了Redis事务无法保证能够得到成功的结果,







