#蓝色大道接入须知



在业务逻辑不发生改变的情况下,主流程需要修改步骤如下



## 1.新增_计费规则支持多车型(2天)



后台管理系统需要修改配置多种车型的计价规则



## 2.修改_预估价格接口(2天)



现在的蓝色大道预估价格只支持一种车型, 再需要支持多车型情况下,需要优化预估方法慢的问题, 

修改, 



## 4.新增_第三方接入功能(2天)



类似于滴滴的企业接入,配置南网平台的回调地址,与ClientId,进行服务间调用



并且与open服务对接



## 3.修改_订单流转接口(2天)



### 1.司机接单回调

###2.前往预约地点回调

###3.到达预约地点回调

###4.确认乘客上车回调

###5.到达目的地接口

###6.发起收款接口

###7.创建订单接口



现在使用的是派单方式, 在不更改现有派单方式的基础上,需要更改回调地址,和统一回调数据格式(与滴滴统一)



## 5.考虑_抢单与派单(切换为抢单1天)



派单逻辑, 使用Redis GEO功能获取起点附近车辆, 从近到远遍历车辆判断是否接单, 如果没有接单封装乘客信息到redis中等待司机长连接获取,



抢单逻辑, 使用Redis GEO 功能获取附近车辆,获取到没有接单的司机, 在数据库中保存一条当前司机可见的订单信息, 等待司机抢单



当前派单逻辑是存在的, 考虑优化



###6.测试当前闪电数据库, 搭建自有车辆服务相关配置(2天)



### 7.优化已存在问题.测试与现有开发平台联调(14天)



修改蓝色大道先存在的问题,对蓝色大道进行测试修改